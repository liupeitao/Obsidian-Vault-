# 异常处理

@ControllerAdvice

@SimpleMappingExceptionResolver

@ExceptionHandler

```java
@ControllerAdvice
public class GlobalExceptionHandler  {

        public static final String ERROR_VIEW = "error";

        Logger logger = LoggerFactory.getLogger(getClass());

        @ExceptionHandler(value = {Exception.class })
    public Object errorHandler(HttpServletRequest reqest,
                HttpServletResponse response, Exception e) throws Exception {

        //e.printStackTrace();
                    // 记录日志
                    logger.error(ExceptionUtils.getMessage(e));
        // 是否是Ajax请求
        if (isAjax(reqest)) {
            return JSONResult.errorException(e.getMessage());
        } else {
                ModelAndView mav = new ModelAndView();
              mav.addObject("exception", e);
              mav.addObject("url", reqest.getRequestURL());
              mav.setViewName(ERROR_VIEW);
              return mav;
        }
    }

        /**
         *
         * @Title: GlobalExceptionHandler.java
         * @Package com.weiz.exception
         * @Description: 判断是否是Ajax请求
         * Copyright: Copyright (c) 2017
         *
         * @author weiz
         * @date 2017年12月3日 下午1:40:39
         * @version V1.0
         */
        public static boolean isAjax(HttpServletRequest httpRequest){
                return  (httpRequest.getHeader("X-Requested-With") != null
                                        && "XMLHttpRequest"

        .equals( httpRequest.getHeader("X-Requested-With")) );
            }
}
```

上面的示例，处理全部Exception的异常，如果需要处理其他异常，例如NullPointerException异常，则只需要在GlobalException类中使用@ExceptionHandler(value ={NullPointerException.class})注解重新定义一个异常处理的方
